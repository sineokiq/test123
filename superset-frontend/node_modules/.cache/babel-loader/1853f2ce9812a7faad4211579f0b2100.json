{"ast":null,"code":"import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";import _includesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/includes\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport moment from 'moment';\nimport { styled, t } from '@superset-ui/core';\nimport Loading from 'src/components/Loading';\nimport ListViewCard from 'src/components/ListViewCard';\nimport SubMenu from 'src/components/Menu/SubMenu';\nimport { mq, CardStyles } from '../utils';\nimport EmptyState from './EmptyState';import { jsx as ___EmotionJSX } from \"@emotion/core\";\nconst ActivityContainer = styled.div`\n  margin-left: ${({ theme }) => theme.gridUnit * 2}px;\n  margin-top: ${({ theme }) => theme.gridUnit * -4}px;\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(31%, max-content));\n  ${[mq[3]]} {\n    grid-template-columns: repeat(auto-fit, minmax(31%, max-content));\n  }\n  ${[mq[2]]} {\n    grid-template-columns: repeat(auto-fit, minmax(42%, max-content));\n  }\n  ${[mq[1]]} {\n    grid-template-columns: repeat(auto-fit, minmax(63%, max-content));\n  }\n  grid-gap: ${({ theme }) => theme.gridUnit * 8}px;\n  justify-content: left;\n  padding: ${({ theme }) => theme.gridUnit * 6}px;\n  padding-top: ${({ theme }) => theme.gridUnit * 2}px;\n  .ant-card-meta-avatar {\n    margin-top: ${({ theme }) => theme.gridUnit * 3}px;\n    margin-left: ${({ theme }) => theme.gridUnit * 2}px;\n  }\n  .ant-card-meta-title {\n    font-weight: ${({ theme }) => theme.typography.weights.bold};\n  }\n`;\nexport default function ActivityTable({ loading, activeChild, setActiveChild, activityData }) {var _activityData$activeC;\n  const getFilterTitle = e => {\n    if (e.dashboard_title)\n    return e.dashboard_title;\n    if (e.label)\n    return e.label;\n    if (e.url && !e.table)\n    return e.item_title;\n    if (e.item_title)\n    return e.item_title;\n    return e.slice_name;\n  };\n  const getIconName = e => {var _e$url, _e$item_url, _e$url2, _e$item_url2;\n    if (e.sql)\n    return 'sql';\n    if ((_e$url = e.url) != null && _includesInstanceProperty(_e$url).call(_e$url, 'dashboard') || (_e$item_url = e.item_url) != null && _includesInstanceProperty(_e$item_url).call(_e$item_url, 'dashboard')) {\n      return 'nav-dashboard';\n    }\n    if ((_e$url2 = e.url) != null && _includesInstanceProperty(_e$url2).call(_e$url2, 'explore') || (_e$item_url2 = e.item_url) != null && _includesInstanceProperty(_e$item_url2).call(_e$item_url2, 'explore')) {\n      return 'nav-charts';\n    }\n    return '';\n  };\n  const tabs = [\n  {\n    name: 'Edited',\n    label: t('Edited'),\n    onClick: () => {\n      setActiveChild('Edited');\n    } },\n\n  {\n    name: 'Created',\n    label: t('Created'),\n    onClick: () => {\n      setActiveChild('Created');\n    } }];\n\n\n  if (activityData != null && activityData.Viewed) {\n    tabs.unshift({\n      name: 'Viewed',\n      label: t('Viewed'),\n      onClick: () => {\n        setActiveChild('Viewed');\n      } });\n\n  } else\n  {\n    tabs.unshift({\n      name: 'Examples',\n      label: t('Examples'),\n      onClick: () => {\n        setActiveChild('Examples');\n      } });\n\n  }\n  const renderActivity = () => {var _context;\n    const getRecentRef = e => {\n      if (activeChild === 'Viewed') {\n        return e.item_url;\n      }\n      return e.sql ? `/superset/sqllab?savedQueryId=${e.id}` : e.url;\n    };\n    return _mapInstanceProperty(_context = activityData[activeChild]).call(_context, e => ___EmotionJSX(CardStyles, { onClick: () => {\n        window.location.href = getRecentRef(e);\n      }, key: e.id },\n    ___EmotionJSX(ListViewCard, { loading: loading, cover: ___EmotionJSX(React.Fragment, null), url: e.sql ? `/superset/sqllab?savedQueryId=${e.id}` : e.url, title: getFilterTitle(e), description: `Last Edited: ${moment(e.changed_on_utc).format('MM/DD/YYYY HH:mm:ss')}`, avatar: getIconName(e), actions: null })));\n\n  };\n  if (loading)\n  return ___EmotionJSX(Loading, { position: \"inline\" });\n  return ___EmotionJSX(React.Fragment, null,\n  ___EmotionJSX(SubMenu, { activeChild: activeChild\n    // eslint-disable-next-line react/no-children-prop\n    , tabs: tabs }),\n  ___EmotionJSX(React.Fragment, null,\n  ((_activityData$activeC = activityData[activeChild]) == null ? void 0 : _activityData$activeC.length) > 0 ? ___EmotionJSX(ActivityContainer, null, renderActivity()) : ___EmotionJSX(EmptyState, { tableName: \"RECENTS\", tab: activeChild })));\n\n\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(ActivityContainer, \"ActivityContainer\", \"/app/superset-frontend/src/views/CRUD/welcome/ActivityTable.tsx\");reactHotLoader.register(ActivityTable, \"ActivityTable\", \"/app/superset-frontend/src/views/CRUD/welcome/ActivityTable.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/app/superset-frontend/src/views/CRUD/welcome/ActivityTable.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport moment from 'moment';\nimport { styled, t } from '@superset-ui/core';\n\nimport Loading from 'src/components/Loading';\nimport ListViewCard from 'src/components/ListViewCard';\nimport SubMenu from 'src/components/Menu/SubMenu';\nimport { ActivityData } from './Welcome';\nimport { mq, CardStyles } from '../utils';\nimport EmptyState from './EmptyState';\n\ninterface ActivityObjects {\n  action?: string;\n  item_title?: string;\n  slice_name: string;\n  time: string;\n  changed_on_utc: string;\n  url: string;\n  sql: string;\n  dashboard_title: string;\n  label: string;\n  id: string;\n  table: object;\n  item_url: string;\n}\n\ninterface ActivityProps {\n  user: {\n    userId: string | number;\n  };\n  activeChild: string;\n  setActiveChild: (arg0: string) => void;\n  loading: boolean;\n  activityData: ActivityData;\n}\n\nconst ActivityContainer = styled.div`\n  margin-left: ${({ theme }) => theme.gridUnit * 2}px;\n  margin-top: ${({ theme }) => theme.gridUnit * -4}px;\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(31%, max-content));\n  ${[mq[3]]} {\n    grid-template-columns: repeat(auto-fit, minmax(31%, max-content));\n  }\n  ${[mq[2]]} {\n    grid-template-columns: repeat(auto-fit, minmax(42%, max-content));\n  }\n  ${[mq[1]]} {\n    grid-template-columns: repeat(auto-fit, minmax(63%, max-content));\n  }\n  grid-gap: ${({ theme }) => theme.gridUnit * 8}px;\n  justify-content: left;\n  padding: ${({ theme }) => theme.gridUnit * 6}px;\n  padding-top: ${({ theme }) => theme.gridUnit * 2}px;\n  .ant-card-meta-avatar {\n    margin-top: ${({ theme }) => theme.gridUnit * 3}px;\n    margin-left: ${({ theme }) => theme.gridUnit * 2}px;\n  }\n  .ant-card-meta-title {\n    font-weight: ${({ theme }) => theme.typography.weights.bold};\n  }\n`;\n\nexport default function ActivityTable({\n  loading,\n  activeChild,\n  setActiveChild,\n  activityData,\n}: ActivityProps) {\n  const getFilterTitle = (e: ActivityObjects) => {\n    if (e.dashboard_title) return e.dashboard_title;\n    if (e.label) return e.label;\n    if (e.url && !e.table) return e.item_title;\n    if (e.item_title) return e.item_title;\n    return e.slice_name;\n  };\n\n  const getIconName = (e: ActivityObjects) => {\n    if (e.sql) return 'sql';\n    if (e.url?.includes('dashboard') || e.item_url?.includes('dashboard')) {\n      return 'nav-dashboard';\n    }\n    if (e.url?.includes('explore') || e.item_url?.includes('explore')) {\n      return 'nav-charts';\n    }\n    return '';\n  };\n\n  const tabs = [\n    {\n      name: 'Edited',\n      label: t('Edited'),\n      onClick: () => {\n        setActiveChild('Edited');\n      },\n    },\n    {\n      name: 'Created',\n      label: t('Created'),\n      onClick: () => {\n        setActiveChild('Created');\n      },\n    },\n  ];\n\n  if (activityData?.Viewed) {\n    tabs.unshift({\n      name: 'Viewed',\n      label: t('Viewed'),\n      onClick: () => {\n        setActiveChild('Viewed');\n      },\n    });\n  } else {\n    tabs.unshift({\n      name: 'Examples',\n      label: t('Examples'),\n      onClick: () => {\n        setActiveChild('Examples');\n      },\n    });\n  }\n\n  const renderActivity = () => {\n    const getRecentRef = (e: ActivityObjects) => {\n      if (activeChild === 'Viewed') {\n        return e.item_url;\n      }\n      return e.sql ? `/superset/sqllab?savedQueryId=${e.id}` : e.url;\n    };\n    return activityData[activeChild].map((e: ActivityObjects) => (\n      <CardStyles\n        onClick={() => {\n          window.location.href = getRecentRef(e);\n        }}\n        key={e.id}\n      >\n        <ListViewCard\n          loading={loading}\n          cover={<></>}\n          url={e.sql ? `/superset/sqllab?savedQueryId=${e.id}` : e.url}\n          title={getFilterTitle(e)}\n          description={`Last Edited: ${moment(e.changed_on_utc).format(\n            'MM/DD/YYYY HH:mm:ss',\n          )}`}\n          avatar={getIconName(e)}\n          actions={null}\n        />\n      </CardStyles>\n    ));\n  };\n  if (loading) return <Loading position=\"inline\" />;\n  return (\n    <>\n      <SubMenu\n        activeChild={activeChild}\n        // eslint-disable-next-line react/no-children-prop\n        tabs={tabs}\n      />\n      <>\n        {activityData[activeChild]?.length > 0 ? (\n          <ActivityContainer>{renderActivity()}</ActivityContainer>\n        ) : (\n          <EmptyState tableName=\"RECENTS\" tab={activeChild} />\n        )}\n      </>\n    </>\n  );\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}