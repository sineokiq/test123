{"ast":null,"code":"import _findInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/find\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport columnType from 'src/explore/propTypes/columnType';\nimport { DraggableOptionControlLabel } from 'src/explore/components/OptionControls';\nimport { OPTION_TYPES } from 'src/explore/components/optionTypes';\nimport AdhocMetricOption from './AdhocMetricOption';\nimport AdhocMetric from './AdhocMetric';\nimport savedMetricType from './savedMetricType';\nimport adhocMetricType from './adhocMetricType';import { jsx as ___EmotionJSX } from \"@emotion/core\";\n\nconst propTypes = {\n  option: PropTypes.oneOfType([savedMetricType, adhocMetricType]).isRequired,\n  index: PropTypes.number.isRequired,\n  onMetricEdit: PropTypes.func,\n  onRemoveMetric: PropTypes.func,\n  onMoveLabel: PropTypes.func,\n  onDropLabel: PropTypes.func,\n  columns: PropTypes.arrayOf(columnType),\n  savedMetrics: PropTypes.arrayOf(savedMetricType),\n  savedMetricsOptions: PropTypes.arrayOf(savedMetricType),\n  multi: PropTypes.bool,\n  datasourceType: PropTypes.string };\n\n\nexport default function MetricDefinitionValue({\n  option,\n  onMetricEdit,\n  onRemoveMetric,\n  columns,\n  savedMetrics,\n  savedMetricsOptions,\n  datasourceType,\n  onMoveLabel,\n  onDropLabel,\n  index })\n{\n  const getSavedMetricByName = (metricName) =>\n  _findInstanceProperty(savedMetrics).call(savedMetrics, metric => metric.metric_name === metricName);\n\n  let savedMetric;\n  if (option.metric_name) {\n    savedMetric = option;\n  } else if (typeof option === 'string') {\n    savedMetric = getSavedMetricByName(option);\n  }\n\n  if (option instanceof AdhocMetric || savedMetric) {var _savedMetric;\n    const adhocMetric =\n    option instanceof AdhocMetric ? option : new AdhocMetric({ isNew: true });\n\n    const metricOptionProps = {\n      onMetricEdit,\n      onRemoveMetric,\n      columns,\n      savedMetricsOptions,\n      datasourceType,\n      adhocMetric,\n      onMoveLabel,\n      onDropLabel,\n      index,\n      savedMetric: (_savedMetric = savedMetric) != null ? _savedMetric : {} };\n\n\n    return ___EmotionJSX(AdhocMetricOption, metricOptionProps);\n  }\n  if (typeof option === 'string') {\n    return (\n      ___EmotionJSX(DraggableOptionControlLabel, {\n        label: option,\n        onRemove: onRemoveMetric,\n        onMoveLabel: onMoveLabel,\n        onDropLabel: onDropLabel,\n        type: OPTION_TYPES.metric,\n        index: index,\n        isFunction: true }));\n\n\n  }\n  return null;\n}\nMetricDefinitionValue.propTypes = propTypes;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/app/superset-frontend/src/explore/components/controls/MetricControl/MetricDefinitionValue.jsx\");reactHotLoader.register(MetricDefinitionValue, \"MetricDefinitionValue\", \"/app/superset-frontend/src/explore/components/controls/MetricControl/MetricDefinitionValue.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/app/superset-frontend/src/explore/components/controls/MetricControl/MetricDefinitionValue.jsx"],"names":["React","PropTypes","columnType","DraggableOptionControlLabel","OPTION_TYPES","AdhocMetricOption","AdhocMetric","savedMetricType","adhocMetricType","propTypes","option","oneOfType","isRequired","index","number","onMetricEdit","func","onRemoveMetric","onMoveLabel","onDropLabel","columns","arrayOf","savedMetrics","savedMetricsOptions","multi","bool","datasourceType","string","MetricDefinitionValue","getSavedMetricByName","metricName","metric","metric_name","savedMetric","adhocMetric","isNew","metricOptionProps"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport columnType from 'src/explore/propTypes/columnType';\nimport { DraggableOptionControlLabel } from 'src/explore/components/OptionControls';\nimport { OPTION_TYPES } from 'src/explore/components/optionTypes';\nimport AdhocMetricOption from './AdhocMetricOption';\nimport AdhocMetric from './AdhocMetric';\nimport savedMetricType from './savedMetricType';\nimport adhocMetricType from './adhocMetricType';\n\nconst propTypes = {\n  option: PropTypes.oneOfType([savedMetricType, adhocMetricType]).isRequired,\n  index: PropTypes.number.isRequired,\n  onMetricEdit: PropTypes.func,\n  onRemoveMetric: PropTypes.func,\n  onMoveLabel: PropTypes.func,\n  onDropLabel: PropTypes.func,\n  columns: PropTypes.arrayOf(columnType),\n  savedMetrics: PropTypes.arrayOf(savedMetricType),\n  savedMetricsOptions: PropTypes.arrayOf(savedMetricType),\n  multi: PropTypes.bool,\n  datasourceType: PropTypes.string,\n};\n\nexport default function MetricDefinitionValue({\n  option,\n  onMetricEdit,\n  onRemoveMetric,\n  columns,\n  savedMetrics,\n  savedMetricsOptions,\n  datasourceType,\n  onMoveLabel,\n  onDropLabel,\n  index,\n}) {\n  const getSavedMetricByName = metricName =>\n    savedMetrics.find(metric => metric.metric_name === metricName);\n\n  let savedMetric;\n  if (option.metric_name) {\n    savedMetric = option;\n  } else if (typeof option === 'string') {\n    savedMetric = getSavedMetricByName(option);\n  }\n\n  if (option instanceof AdhocMetric || savedMetric) {\n    const adhocMetric =\n      option instanceof AdhocMetric ? option : new AdhocMetric({ isNew: true });\n\n    const metricOptionProps = {\n      onMetricEdit,\n      onRemoveMetric,\n      columns,\n      savedMetricsOptions,\n      datasourceType,\n      adhocMetric,\n      onMoveLabel,\n      onDropLabel,\n      index,\n      savedMetric: savedMetric ?? {},\n    };\n\n    return <AdhocMetricOption {...metricOptionProps} />;\n  }\n  if (typeof option === 'string') {\n    return (\n      <DraggableOptionControlLabel\n        label={option}\n        onRemove={onRemoveMetric}\n        onMoveLabel={onMoveLabel}\n        onDropLabel={onDropLabel}\n        type={OPTION_TYPES.metric}\n        index={index}\n        isFunction\n      />\n    );\n  }\n  return null;\n}\nMetricDefinitionValue.propTypes = propTypes;\n"]},"metadata":{},"sourceType":"module"}