{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t } from '@superset-ui/core';\nimport { isFeatureEnabled, FeatureFlag } from 'src/featureFlags';\nimport ConfirmStatusChange from 'src/components/ConfirmStatusChange';\nimport Icon from 'src/components/Icon';\nimport ListViewCard from 'src/components/ListViewCard';\nimport Label from 'src/components/Label';\nimport { Dropdown, Menu } from 'src/common/components';\nimport FaveStar from 'src/components/FaveStar';\nimport FacePile from 'src/components/FacePile';\nimport { handleChartDelete, handleBulkChartExport, CardStyles } from '../utils';import { jsx as ___EmotionJSX } from \"@emotion/core\";\nexport default function ChartCard({ chart, hasPerm, openChartEditModal, bulkSelectEnabled, addDangerToast, addSuccessToast, refreshData, loading, saveFavoriteStatus, favoriteStatus, chartFilter, userId }) {\n  const canEdit = hasPerm('can_write');\n  const canDelete = hasPerm('can_write');\n  const canExport = hasPerm('can_read') && isFeatureEnabled(FeatureFlag.VERSIONED_EXPORT);\n  const menu = ___EmotionJSX(Menu, null,\n  canDelete && ___EmotionJSX(Menu.Item, null,\n  ___EmotionJSX(ConfirmStatusChange, { title: t('Please confirm'), description: ___EmotionJSX(React.Fragment, null,\n    t('Are you sure you want to delete'), \" \", ___EmotionJSX(\"b\", null, chart.slice_name), \"?\"),\n\n    onConfirm: () => handleChartDelete(chart, addSuccessToast, addDangerToast, refreshData, chartFilter, userId) },\n  confirmDelete => ___EmotionJSX(\"div\", { \"data-test\": \"chart-list-delete-option\", role: \"button\", tabIndex: 0, className: \"action-button\", onClick: confirmDelete },\n  ___EmotionJSX(ListViewCard.MenuIcon, { name: \"trash\" }), \" \", t('Delete')))),\n\n\n\n  canExport && ___EmotionJSX(Menu.Item, { role: \"button\", tabIndex: 0, onClick: () => handleBulkChartExport([chart]) },\n  ___EmotionJSX(ListViewCard.MenuIcon, { name: \"share\" }), \" \", t('Export')),\n\n  canEdit && ___EmotionJSX(Menu.Item, { \"data-test\": \"chart-list-edit-option\", role: \"button\", tabIndex: 0, onClick: () => openChartEditModal(chart) },\n  ___EmotionJSX(ListViewCard.MenuIcon, { name: \"edit-alt\" }), \" \", t('Edit')));\n\n\n  return ___EmotionJSX(CardStyles, { onClick: () => {\n      window.location.href = chart.url;\n    } },\n  ___EmotionJSX(ListViewCard, { loading: loading, title: chart.slice_name, url: bulkSelectEnabled ? undefined : chart.url, imgURL: chart.thumbnail_url || '', imgFallbackURL: \"/static/assets/images/chart-card-fallback.svg\", description: t('Last modified %s', chart.changed_on_delta_humanized), coverLeft: ___EmotionJSX(FacePile, { users: chart.owners || [] }), coverRight: ___EmotionJSX(Label, { bsStyle: \"secondary\" }, chart.datasource_name_text), actions: ___EmotionJSX(ListViewCard.Actions, { onClick: e => {\n        e.stopPropagation();\n        e.preventDefault();\n      } },\n    ___EmotionJSX(FaveStar, { itemId: chart.id, saveFaveStar: saveFavoriteStatus, isStarred: favoriteStatus }),\n    ___EmotionJSX(Dropdown, { overlay: menu },\n    ___EmotionJSX(Icon, { name: \"more-horiz\" }))) }));\n\n\n\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(ChartCard, \"ChartCard\", \"/app/superset-frontend/src/views/CRUD/chart/ChartCard.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/app/superset-frontend/src/views/CRUD/chart/ChartCard.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t } from '@superset-ui/core';\nimport { isFeatureEnabled, FeatureFlag } from 'src/featureFlags';\nimport ConfirmStatusChange from 'src/components/ConfirmStatusChange';\nimport Icon from 'src/components/Icon';\nimport Chart from 'src/types/Chart';\n\nimport ListViewCard from 'src/components/ListViewCard';\nimport Label from 'src/components/Label';\nimport { Dropdown, Menu } from 'src/common/components';\nimport FaveStar from 'src/components/FaveStar';\nimport FacePile from 'src/components/FacePile';\nimport { handleChartDelete, handleBulkChartExport, CardStyles } from '../utils';\n\ninterface ChartCardProps {\n  chart: Chart;\n  hasPerm: (perm: string) => boolean;\n  openChartEditModal: (chart: Chart) => void;\n  bulkSelectEnabled: boolean;\n  addDangerToast: (msg: string) => void;\n  addSuccessToast: (msg: string) => void;\n  refreshData: () => void;\n  loading?: boolean;\n  saveFavoriteStatus: (id: number, isStarred: boolean) => void;\n  favoriteStatus: boolean;\n  chartFilter?: string;\n  userId?: number;\n}\n\nexport default function ChartCard({\n  chart,\n  hasPerm,\n  openChartEditModal,\n  bulkSelectEnabled,\n  addDangerToast,\n  addSuccessToast,\n  refreshData,\n  loading,\n  saveFavoriteStatus,\n  favoriteStatus,\n  chartFilter,\n  userId,\n}: ChartCardProps) {\n  const canEdit = hasPerm('can_write');\n  const canDelete = hasPerm('can_write');\n  const canExport =\n    hasPerm('can_read') && isFeatureEnabled(FeatureFlag.VERSIONED_EXPORT);\n\n  const menu = (\n    <Menu>\n      {canDelete && (\n        <Menu.Item>\n          <ConfirmStatusChange\n            title={t('Please confirm')}\n            description={\n              <>\n                {t('Are you sure you want to delete')} <b>{chart.slice_name}</b>\n                ?\n              </>\n            }\n            onConfirm={() =>\n              handleChartDelete(\n                chart,\n                addSuccessToast,\n                addDangerToast,\n                refreshData,\n                chartFilter,\n                userId,\n              )\n            }\n          >\n            {confirmDelete => (\n              <div\n                data-test=\"chart-list-delete-option\"\n                role=\"button\"\n                tabIndex={0}\n                className=\"action-button\"\n                onClick={confirmDelete}\n              >\n                <ListViewCard.MenuIcon name=\"trash\" /> {t('Delete')}\n              </div>\n            )}\n          </ConfirmStatusChange>\n        </Menu.Item>\n      )}\n      {canExport && (\n        <Menu.Item\n          role=\"button\"\n          tabIndex={0}\n          onClick={() => handleBulkChartExport([chart])}\n        >\n          <ListViewCard.MenuIcon name=\"share\" /> {t('Export')}\n        </Menu.Item>\n      )}\n      {canEdit && (\n        <Menu.Item\n          data-test=\"chart-list-edit-option\"\n          role=\"button\"\n          tabIndex={0}\n          onClick={() => openChartEditModal(chart)}\n        >\n          <ListViewCard.MenuIcon name=\"edit-alt\" /> {t('Edit')}\n        </Menu.Item>\n      )}\n    </Menu>\n  );\n  return (\n    <CardStyles\n      onClick={() => {\n        window.location.href = chart.url;\n      }}\n    >\n      <ListViewCard\n        loading={loading}\n        title={chart.slice_name}\n        url={bulkSelectEnabled ? undefined : chart.url}\n        imgURL={chart.thumbnail_url || ''}\n        imgFallbackURL=\"/static/assets/images/chart-card-fallback.svg\"\n        description={t('Last modified %s', chart.changed_on_delta_humanized)}\n        coverLeft={<FacePile users={chart.owners || []} />}\n        coverRight={\n          <Label bsStyle=\"secondary\">{chart.datasource_name_text}</Label>\n        }\n        actions={\n          <ListViewCard.Actions\n            onClick={e => {\n              e.stopPropagation();\n              e.preventDefault();\n            }}\n          >\n            <FaveStar\n              itemId={chart.id}\n              saveFaveStar={saveFavoriteStatus}\n              isStarred={favoriteStatus}\n            />\n            <Dropdown overlay={menu}>\n              <Icon name=\"more-horiz\" />\n            </Dropdown>\n          </ListViewCard.Actions>\n        }\n      />\n    </CardStyles>\n  );\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}