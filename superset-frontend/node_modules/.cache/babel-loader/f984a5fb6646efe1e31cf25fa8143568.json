{"ast":null,"code":"import \"core-js/modules/web.dom-collections.iterator.js\";import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";import _reject from \"lodash/reject\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useState } from 'react';\nimport { styled, t } from '@superset-ui/core';\nimport { Collapse } from 'src/common/components';\n\nimport withToasts from 'src/messageToasts/enhancers/withToasts';\nimport Loading from 'src/components/Loading';\nimport { getRecentAcitivtyObjs, mq } from '../utils';\nimport ActivityTable from './ActivityTable';\nimport ChartTable from './ChartTable';\nimport SavedQueries from './SavedQueries';\nimport DashboardTable from './DashboardTable';import { jsx as ___EmotionJSX } from \"@emotion/core\";\nconst WelcomeContainer = styled.div`\n  background-color: ${({ theme }) => theme.colors.grayscale.light4};\n  nav {\n    margin-top: -15px;\n    background-color: ${({ theme }) => theme.colors.grayscale.light4};\n    &:after {\n      content: '';\n      display: block;\n      border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n      margin: 0px ${({ theme }) => theme.gridUnit * 6}px;\n      position: relative;\n      ${[mq[1]]} {\n        margin-top: 5px;\n        margin: 0px 2px;\n      }\n    }\n    .nav.navbar-nav {\n      & > li:nth-child(1),\n      & > li:nth-child(2),\n      & > li:nth-child(3) {\n        margin-top: ${({ theme }) => theme.gridUnit * 2}px;\n      }\n    }\n    button {\n      padding: 3px 21px;\n    }\n    .navbar-right {\n      position: relative;\n      top: 11px;\n    }\n  }\n  .ant-card.ant-card-bordered {\n    border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n  }\n`;\nfunction Welcome({ user, addDangerToast }) {\n  const recent = `/superset/recent_activity/${user.userId}/?limit=6`;\n  const [activeChild, setActiveChild] = useState('Viewed');\n  const [activityData, setActivityData] = useState({});\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    getRecentAcitivtyObjs(user.userId, recent, addDangerToast).\n    then(res => {\n      const data = {\n        Created: [\n        ...res.createdByChart,\n        ...res.createdByDash,\n        ...res.createdByQuery],\n\n        myChart: res.createdByChart,\n        myDash: res.createdByDash,\n        myQuery: res.createdByQuery,\n        Edited: [...res.editedChart, ...res.editedDash] };\n\n      if (res.viewed) {var _context;\n        const filtered = _mapInstanceProperty(_context = _reject(res.viewed, ['item_url', null])).call(_context, r => r);\n        data.Viewed = filtered;\n        setActiveChild('Viewed');\n      } else\n      {\n        data.Examples = res.examples;\n        setActiveChild('Examples');\n      }\n      setActivityData(data);\n      setLoading(false);\n    }).\n    catch(e => {\n      setLoading(false);\n      addDangerToast(`There was an issue fetching your recent acitivity: ${e}`);\n    });\n  }, []);\n  return ___EmotionJSX(WelcomeContainer, null,\n  ___EmotionJSX(Collapse, { defaultActiveKey: ['1', '2', '3', '4'], ghost: true, bigger: true },\n  ___EmotionJSX(Collapse.Panel, { header: t('Recents'), key: \"1\" },\n  ___EmotionJSX(ActivityTable, { user: user, activeChild: activeChild, setActiveChild: setActiveChild, loading: loading, activityData: activityData })),\n\n  ___EmotionJSX(Collapse.Panel, { header: t('Dashboards'), key: \"2\" },\n  loading ? ___EmotionJSX(Loading, { position: \"inline\" }) : ___EmotionJSX(DashboardTable, { user: user, mine: activityData.myDash, isLoading: loading })),\n\n  ___EmotionJSX(Collapse.Panel, { header: t('Saved Queries'), key: \"3\" },\n  loading ? ___EmotionJSX(Loading, { position: \"inline\" }) : ___EmotionJSX(SavedQueries, { user: user, mine: activityData.myQuery })),\n\n  ___EmotionJSX(Collapse.Panel, { header: t('Charts'), key: \"4\" },\n  loading ? ___EmotionJSX(Loading, { position: \"inline\" }) : ___EmotionJSX(ChartTable, { user: user, mine: activityData.myChart }))));\n\n\n\n}__signature__(Welcome, \"useState{[activeChild, setActiveChild]('Viewed')}\\nuseState{[activityData, setActivityData]({})}\\nuseState{[loading, setLoading](true)}\\nuseEffect{}\");const _default =\nwithToasts(Welcome);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(WelcomeContainer, \"WelcomeContainer\", \"/app/superset-frontend/src/views/CRUD/welcome/Welcome.tsx\");reactHotLoader.register(Welcome, \"Welcome\", \"/app/superset-frontend/src/views/CRUD/welcome/Welcome.tsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/views/CRUD/welcome/Welcome.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/app/superset-frontend/src/views/CRUD/welcome/Welcome.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useState } from 'react';\nimport { styled, t } from '@superset-ui/core';\nimport { Collapse } from 'src/common/components';\nimport { User } from 'src/types/bootstrapTypes';\nimport { reject } from 'lodash';\nimport withToasts from 'src/messageToasts/enhancers/withToasts';\nimport Loading from 'src/components/Loading';\nimport { getRecentAcitivtyObjs, mq } from '../utils';\n\nimport ActivityTable from './ActivityTable';\nimport ChartTable from './ChartTable';\nimport SavedQueries from './SavedQueries';\nimport DashboardTable from './DashboardTable';\n\ninterface WelcomeProps {\n  user: User;\n  addDangerToast: (arg0: string) => void;\n}\n\nexport interface ActivityData {\n  Created?: Array<object>;\n  Edited?: Array<object>;\n  Viewed?: Array<object>;\n  Examples?: Array<object>;\n  myChart?: Array<object>;\n  myDash?: Array<object>;\n  myQuery?: Array<object>;\n}\n\nconst WelcomeContainer = styled.div`\n  background-color: ${({ theme }) => theme.colors.grayscale.light4};\n  nav {\n    margin-top: -15px;\n    background-color: ${({ theme }) => theme.colors.grayscale.light4};\n    &:after {\n      content: '';\n      display: block;\n      border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n      margin: 0px ${({ theme }) => theme.gridUnit * 6}px;\n      position: relative;\n      ${[mq[1]]} {\n        margin-top: 5px;\n        margin: 0px 2px;\n      }\n    }\n    .nav.navbar-nav {\n      & > li:nth-child(1),\n      & > li:nth-child(2),\n      & > li:nth-child(3) {\n        margin-top: ${({ theme }) => theme.gridUnit * 2}px;\n      }\n    }\n    button {\n      padding: 3px 21px;\n    }\n    .navbar-right {\n      position: relative;\n      top: 11px;\n    }\n  }\n  .ant-card.ant-card-bordered {\n    border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n  }\n`;\n\nfunction Welcome({ user, addDangerToast }: WelcomeProps) {\n  const recent = `/superset/recent_activity/${user.userId}/?limit=6`;\n  const [activeChild, setActiveChild] = useState('Viewed');\n  const [activityData, setActivityData] = useState<ActivityData>({});\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    getRecentAcitivtyObjs(user.userId, recent, addDangerToast)\n      .then(res => {\n        const data: any = {\n          Created: [\n            ...res.createdByChart,\n            ...res.createdByDash,\n            ...res.createdByQuery,\n          ],\n          myChart: res.createdByChart,\n          myDash: res.createdByDash,\n          myQuery: res.createdByQuery,\n          Edited: [...res.editedChart, ...res.editedDash],\n        };\n        if (res.viewed) {\n          const filtered = reject(res.viewed, ['item_url', null]).map(r => r);\n          data.Viewed = filtered;\n          setActiveChild('Viewed');\n        } else {\n          data.Examples = res.examples;\n          setActiveChild('Examples');\n        }\n        setActivityData(data);\n        setLoading(false);\n      })\n      .catch(e => {\n        setLoading(false);\n        addDangerToast(\n          `There was an issue fetching your recent acitivity: ${e}`,\n        );\n      });\n  }, []);\n\n  return (\n    <WelcomeContainer>\n      <Collapse defaultActiveKey={['1', '2', '3', '4']} ghost bigger>\n        <Collapse.Panel header={t('Recents')} key=\"1\">\n          <ActivityTable\n            user={user}\n            activeChild={activeChild}\n            setActiveChild={setActiveChild}\n            loading={loading}\n            activityData={activityData}\n          />\n        </Collapse.Panel>\n        <Collapse.Panel header={t('Dashboards')} key=\"2\">\n          {loading ? (\n            <Loading position=\"inline\" />\n          ) : (\n            <DashboardTable\n              user={user}\n              mine={activityData.myDash}\n              isLoading={loading}\n            />\n          )}\n        </Collapse.Panel>\n        <Collapse.Panel header={t('Saved Queries')} key=\"3\">\n          {loading ? (\n            <Loading position=\"inline\" />\n          ) : (\n            <SavedQueries user={user} mine={activityData.myQuery} />\n          )}\n        </Collapse.Panel>\n        <Collapse.Panel header={t('Charts')} key=\"4\">\n          {loading ? (\n            <Loading position=\"inline\" />\n          ) : (\n            <ChartTable user={user} mine={activityData.myChart} />\n          )}\n        </Collapse.Panel>\n      </Collapse>\n    </WelcomeContainer>\n  );\n}\n\nexport default withToasts(Welcome);\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}